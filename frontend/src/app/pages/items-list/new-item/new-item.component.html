<div class="new-item">
  <form
    [formGroup]="productForm"
    (ngSubmit)="onSubmit()"
    class="new-item--form"
  >
    <div class="new-item--header">
      <h3>Add New Product</h3>
      <button type="button" class="new-item--close" (click)="onCancel()">
        âœ•
      </button>
    </div>

    <div class="new-item--content">
      <div class="new-item--image">
        <img src="assets/logo_black.svg" alt="new-product-image" />
      </div>

      <div class="new-item--fields">
        <div class="field-group">
          <label for="name">Product Name</label>
          <input
            id="name"
            type="text"
            formControlName="name"
            placeholder="Enter product name"
            [class.error]="
              productForm.get('name')?.touched &&
              productForm.get('name')?.invalid
            "
          />
          @if (
            productForm.get('name')?.touched && productForm.get('name')?.invalid
          ) {
            <div class="error-message">Product name is required</div>
          }
        </div>

        <div class="field-group">
          <label for="quantity">Quantity</label>
          <input
            id="quantity"
            type="number"
            formControlName="quantity"
            min="0"
            step="1"
            [class.error]="
              productForm.get('quantity')?.touched &&
              productForm.get('quantity')?.invalid
            "
          />
          @if (
            productForm.get('quantity')?.touched &&
            productForm.get('quantity')?.invalid
          ) {
            <div class="error-message">Quantity must be 0 or greater</div>
          }
        </div>

        <div class="field-group">
          <label for="price">Price (EUR)</label>
          <input
            id="price"
            type="number"
            formControlName="price"
            min="0"
            step="0.01"
            [class.error]="
              productForm.get('price')?.touched &&
              productForm.get('price')?.invalid
            "
          />
          @if (
            productForm.get('price')?.touched &&
            productForm.get('price')?.invalid
          ) {
            <div class="error-message">Price must be 0 or greater</div>
          }
        </div>
      </div>
    </div>

    <div class="new-item--actions">
      <button
        type="button"
        class="new-item--button cancel"
        (click)="onCancel()"
        [disabled]="isSubmitting()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="new-item--button submit"
        [disabled]="!isFormValid || isSubmitting()"
      >
        @if (isSubmitting()) {
          Creating...
        } @else {
          Create Product
        }
      </button>
    </div>
  </form>
</div>
